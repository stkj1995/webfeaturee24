---
import MainLayout from "../layouts/MainLayout.astro"; 
import Button from '../components/Button.astro'; 
import Link from '../components/Link.astro'; 
import { Image } from 'astro:assets'; 
import apoteket from "../assets/images/apoteket.jpg"; 
import arbejde from "../assets/images/arbejde.jpg"; 
import glitch from "../assets/images/glitch.jpg"; 
import godtarbejde from "../assets/images/godt-arbejde.jpg"; 
import lidtifem from "../assets/images/lidtifem-pierre-falcke.jpg"; 
import smena from "../assets/images/lomo-smena-17.jpg"; 
import overouticm from "../assets/images/over-out-icm.jpeg"; 
import pierre from "../assets/images/pierre.jpeg"; 
import tyndfilm from "../assets/images/tynd-film.jpg"; 
import "../styles/tobii.min.css"; 
import { animate, scroll } from '@motionone/dom';
---

<MainLayout title="Surprise og Delight">
    <style>
        body {
            cursor: url('/src/assets/images/custom-cursor.png'), auto;
        }
    </style> 

    <div x-data="{ scrollPos: 0, showProgressBar: false, messages: ['Besked 1', 'Besked 2', 'Besked 3'], randomMessage: '' }" @scroll.window="scrollPos = window.scrollY; showProgressBar = scrollPos > 0">
        <div 
            :class="scrollPos > 200 ? 'bg-gradient-to-r from-pink-500 to-yellow-300 text-white' : 'bg-white text-gray-800'" 
            class="transition-all duration-300 min-h-screen"
        >
            <article class="p-4 md:p-0">
                <section class="max-w-xl mx-auto mt-32 prose" id="titel">
                    <h2 class="text-6xl md:text-9xl text-center animate__animated animate__fadeIn" :class="scrollPos > 200 ? 'text-white' : 'text-gray-800'">Uperfekt er perfekt</h2>
                </section>		
            </article>

            <!-- Progress Bar -->
            <div x-show="showProgressBar" class="progress-container fixed top-0 left-0 w-full h-2 bg-transparent">
                <div class="progress-bar h-full bg-gradient-to-r from-blue-400 to-purple-600" :style="{ transform: 'scaleX(' + (scrollPos / (document.body.scrollHeight - window.innerHeight)) + ')' }"></div>
            </div>

            <section class="max-w-4xl mx-auto mt-32" id="herovideo">
                <video class="w-full rounded-lg shadow-lg" autoplay muted loop>
                    <source src="pierre-falcke-video.mp4" type="video/mp4">
                </video>
                <!-- Lydafspiller med loop -->
                <audio id="background-audio" loop>
                    <source src="assets/sounds/warm-chords-loop.mp3" type="audio/mpeg">
                    Your browser does not support the audio element.
                </audio>
            </section>
            
            <section class="max-w-xl mx-auto mt-32 prose" id="manchet">
                <p class="text-xl">Pierre Falcke. Du ved formentligt ikke hvem han er. Men indtil for kort tid siden, så du hans værker et par gange om dagen, hver dag, året rundt. Pierre Falcke var en af verdens bedst sælgende stock-fotografer, og han solgte over 2 millioner fotos om året. Men Pierre kunne ikke drømme om at bruge sine egne fotos - faktisk kan han ikke fordrage sit eget arbejde.</p>
                <div class="mb-6">
                    <a href="pierre.jpeg" class="lightbox">
                        <Image src={pierre} alt="" class="rounded-lg shadow-lg"/>
                        <figcaption class="mt-2 text-center text-sm italic text-gray-600">Pierre Falcke, selvportræt</figcaption>
                    </a>
                </div>
                
                <p class="text-2xl italic text-center bg-gray-800 p-8 text-white rounded-lg">
                    Pierre sælger 2 millioner fotos om året
                </p>
                <p class="text-2xl italic text-center bg-gray-800 p-8 text-white rounded-lg">
                    Det svarer til én fotolicens hvert 16. sekund
                </p>
                <p class="text-2xl italic text-center bg-gray-800 p-8 text-white rounded-lg">
                    Du ser hans fotos ca. 2 gange om dagen
                </p>
            </section>

            <!-- Besked-sektion til tilfældige beskeder -->
            <section class="max-w-xl mx-auto mt-32" x-data="{ 
                randomMessage: '', 
                messages: [
                    'Det uperfekte er ofte det mest ægte.',
                    'Fejl er beviser på, at du prøver.',
                    'Skridtene til succes er ofte i usikkerhedens skygge.',
                    'Husk, at hver fejl bringer dig et skridt tættere på succes.',
                    'Livet er en rejse, ikke en destination. Nyd hvert øjeblik!',
                    'Selv de bedste fotografer tager ikke altid perfekte billeder.',
                    'Hvem har brug for perfekte billeder, når du har karakter?',
                    'Uperfekte øjeblikke er ofte de sjoveste!',
                    'Det eneste perfekte billede er det, der gør dig glad.',
                    'Det er de små, uperfekte øjeblikke, der gør livet værd at leve.',
                    'Selv det mest beskedne motiv kan blive til et mesterværk.',
                    'Husk: det handler ikke kun om billedet, men om historien bag.',
                    'Tag et øjeblik til at se skønheden i det uperfekte.',
                    'Hvad inspirerer dig i dag? Del dit øjeblik med os!',
                    'Find skønheden i det enkle og det uventede.'
                ],
                playSound() {
                    this.$refs.trykforatafspillelyd.play();
                }
            }">
                <button 
                    class="bg-gradient-to-r from-blue-400 to-purple-600 text-white font-bold py-3 px-6 rounded shadow-lg hover:bg-blue-700 transition duration-300 transform hover:scale-105" 
                    @click="randomMessage = messages[Math.floor(Math.random() * messages.length)]; playSound()">
                    Klik for perfekt uperfekt besked
                </button>

                <p class="mt-4 mb-6 text-lg text-gray-800 italic" x-text="randomMessage"></p>

                <!-- Lydafspiller -->
                <audio x-ref="trykforatafspillelyd">
                    <source src="/assets/sounds/click-sound.mp3" type="audio/mpeg">
                </audio>
            </section>

            <section class="grid grid-cols-1 md:grid-cols-2 mt-8">
                <div class="bg-gray-800 p-4 shadow-lg">
                    <h3 class="text-2xl font-bold text-white">Uperfekte billeder</h3>
                    <Image src={overouticm} alt="" class="rounded-lg shadow-lg mb-4"/>
                    <Image src={tyndfilm} alt="" class="rounded-lg shadow-lg mb-4"/>
                </div>
                <div class="bg-gray-800 p-4 shadow-lg">
                    <h3 class="text-2xl font-bold text-white">Smena og ICM</h3>
                    <Image src={smena} alt="" class="rounded-lg shadow-lg mb-4"/>
                    <Image src={glitch} alt="" class="rounded-lg shadow-lg mb-4"/>
                </div>             
            </section>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const audio = document.getElementById('background-audio');
            const herovideoSection = document.getElementById('herovideo');

            window.addEventListener('scroll', () => {
                const rect = herovideoSection.getBoundingClientRect();

                // Tjekker, om video-sektionen er synlig
                if (rect.top >= 0 && rect.bottom <= window.innerHeight) {
                    audio.play().catch((error) => {
                        console.log("Lyden kunne ikke starte:", error);
                    });
                } else {
                    audio.pause();
                }
            });
        });
    </script>
</MainLayout>
